{"version":3,"sources":["../src/SearchFilters.jsx"],"names":["React","useMemo","useContext","PropTypes","breakpoints","useWindowSize","FacetListRefinement","FacetListBase","CurrentRefinements","MobileFilterMenu","SHOW_ALL_NAME","STYLE_VARIANTS","sortItemsByLabelAsc","SearchContext","features","FREE_ALL_TITLE","SearchFilters","variant","size","refinementsFromQueryParams","searchFacetFilters","showMobileMenu","width","small","maxWidth","JSON","stringify","freeAllItems","label","value","searchFacets","filtersFromRefinements","map","title","attribute","isSortedAlphabetical","typeaheadOptions","noDisplay","items","ENROLL_WITH_CODES","defaultProps","inverse","propTypes","oneOf","default"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,OAAhB,EAAyBC,UAAzB,QAA2C,OAA3C;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,WAAT,EAAsBC,aAAtB,QAA2C,cAA3C;AAEA,OAAOC,mBAAP,MAAgC,uBAAhC;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,kBAAP,MAA+B,sBAA/B;AAEA,OAAOC,gBAAP,MAA6B,oBAA7B;AAEA,SAASC,aAAT,EAAwBC,cAAxB,QAA8C,kBAA9C;AACA,SAASC,mBAAT,QAAoC,cAApC;AAEA,SAASC,aAAT,QAA8B,iBAA9B;AACA,SAASC,QAAT,QAAyB,UAAzB;AAEA,OAAO,IAAMC,cAAc,GAAG,YAAvB;;AAEP,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,OAAiB;AAAA,MAAdC,OAAc,QAAdA,OAAc;AACrC,MAAMC,IAAI,GAAGb,aAAa,EAA1B;;AACA,oBAA2DH,UAAU,CAACW,aAAD,CAArE;AAAA,MAAQM,0BAAR,eAAQA,0BAAR;AAAA,MAAoCC,kBAApC,eAAoCA,kBAApC;;AACA,MAAMC,cAAc,GAAGpB,OAAO,CAC5B;AAAA,WAAMiB,IAAI,CAACI,KAAL,GAAalB,WAAW,CAACmB,KAAZ,CAAkBC,QAArC;AAAA,GAD4B,EAE5B,CAACC,IAAI,CAACC,SAAL,CAAeR,IAAf,CAAD,CAF4B,CAA9B;AAIA,MAAMS,YAAY,GAAG1B,OAAO,CAAC;AAAA,WAAM,CACjC;AACE2B,MAAAA,KAAK,EAAE,YADT;AAEE;AACA;AACAC,MAAAA,KAAK,EAAEV,0BAA0B,CAACT,aAAD,CAA1B,GAA4C;AAJrD,KADiC,EAOjC;AACEkB,MAAAA,KAAK,EAAE,aADT;AAEEC,MAAAA,KAAK,EAAEV,0BAA0B,CAACT,aAAD;AAFnC,KAPiC,CAAN;AAAA,GAAD,EAWzB,CAACS,0BAA0B,CAACT,aAAD,CAA3B,CAXyB,CAA5B;AAaA,MAAMoB,YAAY,GAAG7B,OAAO,CAC1B,YAAM;AACJ,QAAM8B,sBAAsB,GAAGX,kBAAkB,CAACY,GAAnB,CAAuB;AAAA,UACpDC,KADoD,SACpDA,KADoD;AAAA,UAC7CC,SAD6C,SAC7CA,SAD6C;AAAA,UAClCC,oBADkC,SAClCA,oBADkC;AAAA,UACZC,gBADY,SACZA,gBADY;AAAA,UACMC,SADN,SACMA,SADN;AAAA,0BAGpD,oBAAC,mBAAD;AACE,QAAA,GAAG,EAAEH,SADP;AAEE,QAAA,KAAK,EAAED,KAFT;AAGE,QAAA,SAAS,EAAEC,SAHb;AAIE,QAAA,KAAK,EAAE,GAJT,CAIc;AAJd;AAKE,QAAA,cAAc,EAAE,wBAACI,KAAD,EAAW;AACzB,cAAIH,oBAAJ,EAA0B;AACxB,mBAAOvB,mBAAmB,CAAC0B,KAAD,CAA1B;AACD;;AACD,iBAAOA,KAAP;AACD,SAVH;AAWE,QAAA,0BAA0B,EAAEnB,0BAX9B;AAYE,QAAA,iBAAiB,EAAEA,0BAA0B,CAACe,SAAD,CAZ/C;AAaE,QAAA,cAAc,EAAC,OAbjB;AAcE,QAAA,gBAAgB,EAAEE,gBAdpB;AAeE,QAAA,UAAU,EAAE,CAAC,CAACA,gBAfhB;AAgBE,QAAA,OAAO,EAAEnB,OAhBX;AAiBE,QAAA,SAAS,EAAEoB;AAjBb,QAHoD;AAAA,KAAvB,CAA/B;AAuBA,wBACE,0CACGvB,QAAQ,CAACyB,iBAAT,iBACC,oBAAC,aAAD;AACE,MAAA,SAAS,EAAE7B,aADb;AAEE,MAAA,cAAc,EAAC,MAFjB;AAGE,MAAA,MAAM,MAHR;AAIE,MAAA,KAAK,EAAEiB,YAJT;AAKE,MAAA,GAAG,EAAEjB,aALP;AAME,MAAA,KAAK,EAAEK,cANT;AAOE,MAAA,OAAO,EAAEE;AAPX,MAFJ,EAYGc,sBAZH,CADF;AAgBD,GAzCyB,EA0C1B,CAACZ,0BAAD,CA1C0B,CAA5B;AA6CA,sBACE,0CACGE,cAAc,gBACb,oBAAC,gBAAD;AAAkB,IAAA,SAAS,EAAC;AAA5B,KACGS,YADH,CADa,gBAKb,uDACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACGA,YADH,CADF,eAIE,oBAAC,kBAAD;AAAoB,IAAA,OAAO,EAAEb;AAA7B,IAJF,CANJ,CADF;AAgBD,CAjFD;;AAmFAD,aAAa,CAACwB,YAAd,GAA6B;AAC3BvB,EAAAA,OAAO,EAAEN,cAAc,CAAC8B;AADG,CAA7B;AAIAzB,aAAa,CAAC0B,SAAd,GAA0B;AACxBzB,EAAAA,OAAO,EAAEd,SAAS,CAACwC,KAAV,CAAgB,CAAChC,cAAc,CAACiC,OAAhB,EAAyBjC,cAAc,CAAC8B,OAAxC,CAAhB;AADe,CAA1B;AAIA,eAAezB,aAAf","sourcesContent":["import React, { useMemo, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { breakpoints, useWindowSize } from '@edx/paragon';\n\nimport FacetListRefinement from './FacetListRefinement';\nimport FacetListBase from './FacetListBase';\nimport CurrentRefinements from './CurrentRefinements';\n\nimport MobileFilterMenu from './MobileFilterMenu';\n\nimport { SHOW_ALL_NAME, STYLE_VARIANTS } from './data/constants';\nimport { sortItemsByLabelAsc } from './data/utils';\n\nimport { SearchContext } from './SearchContext';\nimport { features } from './config';\n\nexport const FREE_ALL_TITLE = 'Free / All';\n\nconst SearchFilters = ({ variant }) => {\n  const size = useWindowSize();\n  const { refinementsFromQueryParams, searchFacetFilters } = useContext(SearchContext);\n  const showMobileMenu = useMemo(\n    () => size.width < breakpoints.small.maxWidth,\n    [JSON.stringify(size)],\n  );\n  const freeAllItems = useMemo(() => [\n    {\n      label: 'Free to me',\n      // flip the 1 to 0 or vice versa using boolean logic\n      // eslint-disable-next-line no-bitwise\n      value: refinementsFromQueryParams[SHOW_ALL_NAME] ^ 1,\n    },\n    {\n      label: 'All courses',\n      value: refinementsFromQueryParams[SHOW_ALL_NAME],\n    },\n  ], [refinementsFromQueryParams[SHOW_ALL_NAME]]);\n\n  const searchFacets = useMemo(\n    () => {\n      const filtersFromRefinements = searchFacetFilters.map(({\n        title, attribute, isSortedAlphabetical, typeaheadOptions, noDisplay,\n      }) => (\n        <FacetListRefinement\n          key={attribute}\n          title={title}\n          attribute={attribute}\n          limit={300} // this is replicating the B2C search experience\n          transformItems={(items) => {\n            if (isSortedAlphabetical) {\n              return sortItemsByLabelAsc(items);\n            }\n            return items;\n          }}\n          refinementsFromQueryParams={refinementsFromQueryParams}\n          defaultRefinement={refinementsFromQueryParams[attribute]}\n          facetValueType=\"array\"\n          typeaheadOptions={typeaheadOptions}\n          searchable={!!typeaheadOptions}\n          variant={variant}\n          noDisplay={noDisplay}\n        />\n      ));\n      return (\n        <>\n          {features.ENROLL_WITH_CODES && (\n            <FacetListBase\n              attribute={SHOW_ALL_NAME}\n              facetValueType=\"bool\"\n              isBold\n              items={freeAllItems}\n              key={SHOW_ALL_NAME}\n              title={FREE_ALL_TITLE}\n              variant={variant}\n            />\n          )}\n          {filtersFromRefinements}\n        </>\n      );\n    },\n    [refinementsFromQueryParams],\n  );\n\n  return (\n    <>\n      {showMobileMenu ? (\n        <MobileFilterMenu className=\"mb-3\">\n          {searchFacets}\n        </MobileFilterMenu>\n      ) : (\n        <>\n          <div className=\"d-flex\">\n            {searchFacets}\n          </div>\n          <CurrentRefinements variant={variant} />\n        </>\n      )}\n    </>\n  );\n};\n\nSearchFilters.defaultProps = {\n  variant: STYLE_VARIANTS.inverse,\n};\n\nSearchFilters.propTypes = {\n  variant: PropTypes.oneOf([STYLE_VARIANTS.default, STYLE_VARIANTS.inverse]),\n};\n\nexport default SearchFilters;\n"],"file":"SearchFilters.js"}