{"version":3,"sources":["../src/FacetListBase.jsx"],"names":["React","useCallback","useContext","PropTypes","NO_OPTIONS_FOUND","STYLE_VARIANTS","FacetDropdown","TypeaheadFacetDropdown","FacetItem","SearchContext","addToRefinementArray","setRefinementAction","deleteRefinementAction","removeFromRefinementArray","FacetListBase","attribute","facetValueType","isBold","isCheckedField","items","title","typeaheadOptions","searchForItems","variant","noDisplay","refinementsFromQueryParams","dispatch","handleInputOnChange","item","value","length","includes","label","renderItems","map","isChecked","defaultProps","inverse","propTypes","string","isRequired","oneOf","bool","arrayOf","shape","placeholder","ariaLabel","minLength","number","func","default"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { NO_OPTIONS_FOUND, STYLE_VARIANTS } from './data/constants';\nimport FacetDropdown from './FacetDropdown';\nimport TypeaheadFacetDropdown from './TypeaheadFacetDropdown';\nimport FacetItem from './FacetItem';\nimport { SearchContext } from './SearchContext';\nimport {\n  addToRefinementArray, setRefinementAction, deleteRefinementAction, removeFromRefinementArray,\n} from './data/actions';\n\nconst FacetListBase = ({\n  attribute,\n  facetValueType,\n  isBold,\n  isCheckedField,\n  items,\n  title,\n  typeaheadOptions,\n  searchForItems,\n  variant,\n  noDisplay,\n}) => {\n  /**\n   * Handles when a facet option is toggled by either updating the appropriate\n   * query parameter for the facet attribute, or removes the facet attribute if\n   * there's no longer any selected options for that facet attribute.\n   */\n\n  const { refinementsFromQueryParams, dispatch } = useContext(SearchContext);\n\n  const handleInputOnChange = (item) => {\n    if (item.value && facetValueType === 'array') {\n      if (item.value.length > 0) {\n        if (refinementsFromQueryParams[attribute]?.includes(item.label)) {\n          dispatch(removeFromRefinementArray(attribute, item.label));\n        } else {\n          dispatch(addToRefinementArray(attribute, item.label));\n        }\n      } else {\n        dispatch(deleteRefinementAction(attribute));\n      }\n    } else if (facetValueType === 'bool') {\n      // eslint-disable-next-line no-bitwise\n      dispatch(setRefinementAction(attribute, refinementsFromQueryParams[attribute] ^ 1));\n    }\n  };\n\n  const renderItems = useCallback(\n    () => {\n      if (!items?.length) {\n        return <span className=\"p-2 d-block\">{NO_OPTIONS_FOUND}</span>;\n      }\n\n      return items.map(item => {\n        const isChecked = isCheckedField ? item[isCheckedField] : !!item.value;\n\n        return (\n          <FacetItem\n            key={item.label}\n            handleInputOnChange={handleInputOnChange}\n            item={item}\n            isChecked={isChecked}\n            variant={variant}\n          />\n        );\n      });\n    },\n    [items],\n  );\n\n  if (noDisplay) {\n    return null;\n  }\n\n  if (typeaheadOptions) {\n    return (\n      <TypeaheadFacetDropdown\n        items={renderItems()}\n        title={title}\n        isBold={isBold}\n        options={typeaheadOptions}\n        searchForItems={searchForItems}\n        variant={variant}\n      />\n    );\n  }\n\n  return (\n    <FacetDropdown\n      items={renderItems()}\n      title={title}\n      isBold={isBold}\n      variant={variant}\n    />\n  );\n};\n\nFacetListBase.defaultProps = {\n  isCheckedField: null,\n  typeaheadOptions: null,\n  searchForItems: null,\n  variant: STYLE_VARIANTS.inverse,\n  noDisplay: false,\n};\n\nFacetListBase.propTypes = {\n  attribute: PropTypes.string.isRequired,\n  facetValueType: PropTypes.oneOf(['array', 'bool']).isRequired,\n  isBold: PropTypes.bool.isRequired,\n  isCheckedField: PropTypes.string,\n  items: PropTypes.arrayOf(PropTypes.shape()).isRequired,\n  title: PropTypes.string.isRequired,\n  typeaheadOptions: PropTypes.shape({\n    placeholder: PropTypes.string.isRequired,\n    ariaLabel: PropTypes.string.isRequired,\n    minLength: PropTypes.number.isRequired,\n  }),\n  searchForItems: PropTypes.func,\n  variant: PropTypes.oneOf([STYLE_VARIANTS.default, STYLE_VARIANTS.inverse]),\n  noDisplay: PropTypes.bool,\n};\n\nexport default FacetListBase;\n"],"file":"FacetListBase.js"}